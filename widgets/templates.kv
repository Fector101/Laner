#:import asynckivy asynckivy

<MyBtmSheet>
    _on_open: asynckivy.start(self.generate_content())

<TypeMapElement>
    orientation: "vertical"
    adaptive_height: True
    spacing: "8dp"

    MDIconButton:
        id: icon
        icon: root.icon
        theme_bg_color: "Custom"
        md_bg_color: "#EDF1F9" if not root.selected else app.theme_cls.primaryColor
        pos_hint: {"center_x": .5}
        theme_icon_color: "Custom"
        icon_color: "white" if root.selected else "black"
        on_release: root.set_active_element(root, root.title.lower())

    MDLabel:
        text: root.title
        pos_hint: {"center_x": .5}
        halign: "center"
        adaptive_height: True

<DetailsLabel>:
    size_hint_x: None
    width: self.texture_size[0]
    text_size: None, None
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    color: (.8, .8, .8, 1) if app.theme_cls.theme_style == "Dark" else (0.41, 0.42, 0.4, 1)
    italic: True

<CustomDropDown>:
    orientation: 'vertical'
    size_hint_y: None
    height: self.minimum_height
    MDBoxLayout:
        size_hint_y: None
        height: dp(50)
        MDLabel:
            text: root.title
            size_hint_x: 0.8
        MDIconButton:
            icon: root.icon
            
            on_release: root.toggle_dropdown()

    MDBoxLayout:
        id: dropdown_content
        size_hint_y: None
        height: self.minimum_height if root.is_open else 0
        opacity: 1 if root.is_open else 0